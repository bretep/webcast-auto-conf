(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{121:function(e,t,r){"use strict";r.r(t);var n=r(0),l=r(158),a=r(77),u=r(13),c=r.n(u),i=r(19),o=r(47),s=r(12),m=r(28),p=r(152),_=r(156),y=r(123),d=r(153),f=r(122),h=r(151),S=r(160);function q(e){var t=e<0,r=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(t&&(e=-e),e<1)return"".concat(t?"-":"").concat(e," B'}");var n=Math.min(Math.floor(Math.log(e)/Math.log(1e3)),r.length-1);e=Number((e/Math.pow(1e3,n)).toFixed(2));var l=r[n];return"".concat(t?"-":"").concat(e," ").concat(l)}function b(e,t){return new Promise(function(r,n){var l=setTimeout(function(){n(new Error("promise timeout"))},e);t.then(function(e){clearTimeout(l),r(e)},function(e){clearTimeout(l),n(e)})})}var g=window.location.origin;var v=Object(n.createContext)(null),T=function(e,t){switch(t.type){case"UPDATE_STATE":return{status:Object(s.a)({},e.status,t.data.status),sys:Object(s.a)({},e.sys,t.data.sys),stream0:Object(s.a)({},e.stream0,t.data.stream0),osd3:Object(s.a)({},e.osd3,t.data.osd3),ready:!0};case"NOT_READY":return Object(s.a)({},e,{ready:!1});default:return e}},M=function(){var e=Object(n.useReducer)(T,{status:{cpuusage:new Array(60).fill(0),memoryfree:1e8,memorytotal:1e8},sys:{},stream0:{},osd3:{}}),t=Object(m.a)(e,2),r=t[0],l=t[1];return Object(n.useEffect)(function(){var e=function(){var e=Object(i.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",b(1500,fetch("".concat(g,"/get_status?_=").concat(Date.now())).then(function(e){return e.text()}).then(function(e){return(new window.DOMParser).parseFromString(e,"text/xml")}).then(function(e){var t=e.querySelector("status"),r=e.querySelector("lan_dhcp");return e&&r&&t&&{version:t.querySelector("version")&&t.querySelector("version").innerHTML.trim()||null,runtime:t.querySelector("runtime")&&t.querySelector("runtime").innerHTML.trim()||null,cpuusage:t.querySelector("cpuusage")&&t.querySelector("cpuusage").innerHTML.trim()||null,memoryfree:t.querySelector("memoryfree")&&t.querySelector("memoryfree").innerHTML.trim()||null,memorytotal:t.querySelector("memorytotal")&&t.querySelector("memorytotal").innerHTML.trim()||null,int_cnt:t.querySelector("int_cnt")&&t.querySelector("int_cnt").innerHTML.trim()||null,lost_int:t.querySelector("lost_int")&&t.querySelector("lost_int").innerHTML.trim()||null,net_packet_sent:t.querySelector("net_packet_sent")&&t.querySelector("net_packet_sent").innerHTML.trim()||null,net_packet_dropped:t.querySelector("net_packet_dropped")&&t.querySelector("net_packet_dropped").innerHTML.trim()||null,dhcp_enable:r.querySelector("enable")&&r.querySelector("enable").innerHTML.trim()||null,dhcp_ip:r.querySelector("ip")&&r.querySelector("ip").innerHTML.trim()||null,dhcp_mask:r.querySelector("mask")&&r.querySelector("mask").innerHTML.trim()||null,dhcp_route:r.querySelector("route")&&r.querySelector("route").innerHTML.trim()||null}||{}})));case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(i.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",b(1500,fetch("".concat(g,"/get_sys?_=").concat(Date.now())).then(function(e){return e.text()}).then(function(e){return(new window.DOMParser).parseFromString(e,"text/xml")}).then(function(e){var t=e.querySelector("sys");return e&&t&&{http_port:t.querySelector("http_port")&&t.querySelector("http_port").innerHTML.trim(),rtsp_port:t.querySelector("rtsp_port")&&t.querySelector("rtsp_port").innerHTML.trim()||null,rtsp_g711:t.querySelector("rtsp_g711")&&t.querySelector("rtsp_g711").innerHTML.trim()||null,rtsp_g711_8k:t.querySelector("rtsp_g711_8k")&&t.querySelector("rtsp_g711_8k").innerHTML.trim()||null,rtsp_g711_mu:t.querySelector("rtsp_g711_mu")&&t.querySelector("rtsp_g711_mu").innerHTML.trim()||null,audio_left_right:t.querySelector("audio_left_right")&&t.querySelector("audio_left_right").innerHTML.trim()||null,pte_g711:t.querySelector("pte_g711")&&t.querySelector("pte_g711").innerHTML.trim()||null,ts_over_rtsp:t.querySelector("ts_over_rtsp")&&t.querySelector("ts_over_rtsp").innerHTML.trim()||null,rtp_multicast:t.querySelector("rtp_multicast")&&t.querySelector("rtp_multicast").innerHTML.trim()||null,udp_ttl:t.querySelector("udp_ttl")&&t.querySelector("udp_ttl").innerHTML.trim()||null,udp_sock_buf_size:t.querySelector("udp_sock_buf_size")&&t.querySelector("udp_sock_buf_size").innerHTML.trim()||null,ip:t.querySelector("ip")&&t.querySelector("ip").innerHTML.trim()||null,netmask:t.querySelector("netmask")&&t.querySelector("netmask").innerHTML.trim()||null,gateway:t.querySelector("gateway")&&t.querySelector("gateway").innerHTML.trim()||null,dns0:t.querySelector("dns0")&&t.querySelector("dns0").innerHTML.trim()||null,dns1:t.querySelector("dns1")&&t.querySelector("dns1").innerHTML.trim()||null,dhcp_enable:t.querySelector("dhcp_enable")&&t.querySelector("dhcp_enable").innerHTML.trim()||null,mac:t.querySelector("mac")&&t.querySelector("mac").innerHTML.trim()||null,hostname:t.querySelector("hostname")&&t.querySelector("hostname").innerHTML.trim()||null}||{}})));case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),n=function(){var e=Object(i.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",b(1500,fetch("".concat(g,"/get_output?input=0&output=0&_=").concat(Date.now())).then(function(e){return e.text()}).then(function(e){return(new window.DOMParser).parseFromString(e,"text/xml")}).then(function(e){var t=e.querySelector("output");return e&&t&&{input:t.querySelector("input")&&t.querySelector("input").innerHTML.trim()||null,output:t.querySelector("output")&&t.querySelector("output").innerHTML.trim()||null,aenc_codec:t.querySelector("aenc_codec")&&t.querySelector("aenc_codec").innerHTML.trim()||null,aenc_bitrate:t.querySelector("aenc_bitrate")&&t.querySelector("aenc_bitrate").innerHTML.trim()||null,venc_enable:t.querySelector("venc_enable")&&t.querySelector("venc_enable").innerHTML.trim()||null,venc_codec:t.querySelector("venc_codec")&&t.querySelector("venc_codec").innerHTML.trim()||null,venc_codec_supported:t.querySelector("venc_codec_supported")&&t.querySelector("venc_codec_supported").innerHTML.trim()||null,venc_gop:t.querySelector("venc_gop")&&t.querySelector("venc_gop").innerHTML.trim()||null,vi_cap_width:t.querySelector("vi_cap_width")&&t.querySelector("vi_cap_width").innerHTML.trim()||null,vi_cap_height:t.querySelector("vi_cap_height")&&t.querySelector("vi_cap_height").innerHTML.trim()||null,venc_width_height_same_as_input:t.querySelector("venc_width_height_same_as_input")&&t.querySelector("venc_width_height_same_as_input").innerHTML.trim()||null,venc_width:t.querySelector("venc_width")&&t.querySelector("venc_width").innerHTML.trim()||null,venc_height:t.querySelector("venc_height")&&t.querySelector("venc_height").innerHTML.trim()||null,venc_framerate:t.querySelector("venc_framerate")&&t.querySelector("venc_framerate").innerHTML.trim()||null,venc_profile:t.querySelector("venc_profile")&&t.querySelector("venc_profile").innerHTML.trim()||null,venc_rc_mode:t.querySelector("venc_rc_mode")&&t.querySelector("venc_rc_mode").innerHTML.trim()||null,venc_bitrate:t.querySelector("venc_bitrate")&&t.querySelector("venc_bitrate").innerHTML.trim()||null,ts_muxrate:t.querySelector("ts_muxrate")&&t.querySelector("ts_muxrate").innerHTML.trim()||null,http_private_enable:t.querySelector("http_private_enable")&&t.querySelector("http_private_enable").innerHTML.trim()||null,http_private_uri:t.querySelector("http_private_uri")&&t.querySelector("http_private_uri").innerHTML.trim()||null,http_ts_enable:t.querySelector("http_ts_enable")&&t.querySelector("http_ts_enable").innerHTML.trim()||null,http_ts_uri:t.querySelector("http_ts_uri")&&t.querySelector("http_ts_uri").innerHTML.trim()||null,http_jpg_enable:t.querySelector("http_jpg_enable")&&t.querySelector("http_jpg_enable").innerHTML.trim()||null,http_jpg_uri:t.querySelector("http_jpg_uri")&&t.querySelector("http_jpg_uri").innerHTML.trim()||null,http_mjpg_enable:t.querySelector("http_mjpg_enable")&&t.querySelector("http_mjpg_enable").innerHTML.trim()||null,http_mjpg_uri:t.querySelector("http_mjpg_uri")&&t.querySelector("http_mjpg_uri").innerHTML.trim()||null,http_hls_enable:t.querySelector("http_hls_enable")&&t.querySelector("http_hls_enable").innerHTML.trim()||null,http_hls_uri:t.querySelector("http_hls_uri")&&t.querySelector("http_hls_uri").innerHTML.trim()||null,http_flv_enable:t.querySelector("http_flv_enable")&&t.querySelector("http_flv_enable").innerHTML.trim()||null,http_flv_uri:t.querySelector("http_flv_uri")&&t.querySelector("http_flv_uri").innerHTML.trim()||null,rtsp_enable:t.querySelector("rtsp_enable")&&t.querySelector("rtsp_enable").innerHTML.trim()||null,rtsp_uri:t.querySelector("rtsp_uri")&&t.querySelector("rtsp_uri").innerHTML.trim()||null,rtmp_enable:t.querySelector("rtmp_enable")&&t.querySelector("rtmp_enable").innerHTML.trim()||null,rtmp_publish_enable:t.querySelector("rtmp_publish_enable")&&t.querySelector("rtmp_publish_enable").innerHTML.trim()||null,rtmp_publish_uri:t.querySelector("rtmp_publish_uri")&&t.querySelector("rtmp_publish_uri").innerHTML.trim()||null,multicast_enable:t.querySelector("multicast_enable")&&t.querySelector("multicast_enable").innerHTML.trim()||null,multicast_ip:t.querySelector("multicast_ip")&&t.querySelector("multicast_ip").innerHTML.trim()||null,multicast_port:t.querySelector("multicast_port")&&t.querySelector("multicast_port").innerHTML.trim()||null,unicast_enable:t.querySelector("unicast_enable")&&t.querySelector("unicast_enable").innerHTML.trim()||null,unicast_ip:t.querySelector("unicast_ip")&&t.querySelector("unicast_ip").innerHTML.trim()||null,unicast_port:t.querySelector("unicast_port")&&t.querySelector("unicast_port").innerHTML.trim()||null}||{}})));case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),a=function(){var e=Object(i.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",b(1500,fetch("".concat(g,"/get_osd?enc_chn=3&osd_chn=0&_=").concat(Date.now())).then(function(e){return e.text()}).then(function(e){return(new window.DOMParser).parseFromString(e,"text/xml")}).then(function(e){var t=e.querySelector("osd");return e&&t&&{enable:t.querySelector("enable")&&t.querySelector("enable").innerHTML.trim()||null,type:t.querySelector("type")&&t.querySelector("type").innerHTML.trim()||null,x:t.querySelector("x")&&t.querySelector("x").innerHTML.trim()||null,y:t.querySelector("y")&&t.querySelector("y").innerHTML.trim()||null,alpha:t.querySelector("alpha")&&t.querySelector("alpha").innerHTML.trim()||null,font_size:t.querySelector("font_size")&&t.querySelector("font_size").innerHTML.trim()||null,color:t.querySelector("color")&&t.querySelector("color").innerHTML.trim()||null,bcolor:t.querySelector("bcolor")&&t.querySelector("bcolor").innerHTML.trim()||null,txt:t.querySelector("txt")&&t.querySelector("txt").innerHTML.trim()||null,bmp:t.querySelector("bmp")&&t.querySelector("bmp").innerHTML.trim()||null}||{}})));case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),u=function(){var u=Object(i.a)(c.a.mark(function u(){var i,o,p,_,y,d,f,h,q,b,g,v,T,M,L,H,E,w,x,j,O,k,C,I,R,D,P,B,U;return c.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,e().catch(function(){l({type:"NOT_READY"})});case 2:return i=u.sent,u.next=5,t().catch(function(){});case 5:return o=u.sent,u.next=8,n().catch(function(){});case 8:return p=u.sent,u.next=11,a().catch(function(){});case 11:_=u.sent,i&&o&&p&&_&&(y="",i&&i.runtime&&(d=i.runtime.split(" "),f=Object(m.a)(d,2),h=f[0],q=f[1],b=h.split("-"),g=Object(m.a)(b,3),v=g[0],T=void 0===v?0:v,M=g[1],L=void 0===M?0:M,H=g[2],E=void 0===H?0:H,w=q.split(":"),x=Object(m.a)(w,3),j=x[0],O=void 0===j?0:j,k=x[1],C=void 0===k?0:k,I=x[2],R=void 0===I?0:I,y=Object(S.a)({years:parseInt(T,10),months:parseInt(L,10),days:parseInt(E,10),hours:parseInt(O,10),minutes:parseInt(C,10),seconds:parseInt(R,10)})),60===(D=r.status.cpuusage||[]).length&&D.shift(),P=parseInt(i.cpuusage,10)||0,D.push(P),B=1e3*parseInt(i.memoryfree,10)||0,U=1e3*parseInt(i.memorytotal,10)||0,l({type:"UPDATE_STATE",data:{status:Object(s.a)({},i,{upTime:y,cpuusage:D,memoryfree:B,memorytotal:U}),sys:Object(s.a)({},o),stream0:Object(s.a)({},p),osd3:Object(s.a)({},_)}}));case 13:case"end":return u.stop()}},u)}));return function(){return u.apply(this,arguments)}}();u();var o=setInterval(Object(i.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:case"end":return e.stop()}},e)})),1e3);return function(){clearInterval(o),o=null}},[]),{encoderState:r}},L=function(e){var t=e.children,r=M();return n.default.createElement(v.Provider,{value:r},t)},H=function(){var e=Object(n.useContext)(v).encoderState;return Object(s.a)({},e)},E=r(154),w=r(70),x=r(53),j=r.n(x),O=function(){var e=H(),t=e.status,r=e.sys,l=e.ready,a=j()();return n.default.createElement(n.default.Fragment,null,n.default.createElement(f.a,{square:!0,elevation:0,style:{position:"fixed",bottom:0,left:0,right:0,background:a.palette.secondary.main,boxShadow:"0px -2px -4px -1px rgba(0,0,0,0.2), 0px -4px -5px 0px rgba(0,0,0,0.14), 0px -1px -10px 0px rgba(0,0,0,0.12)"}},n.default.createElement(y.a,{variant:"body1",style:{display:"block",marginLeft:5,marginRight:5,marginTop:5}},n.default.createElement(h.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",spacing:2},n.default.createElement(h.a,{item:!0},"Video Frames:"),n.default.createElement(h.a,{item:!0},t.int_cnt," Received"),n.default.createElement(h.a,{item:!0},t.lost_int-2,"  Dropped"))),n.default.createElement(y.a,{variant:"body1",style:{display:"block",marginLeft:5,marginRight:5}},n.default.createElement(h.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",spacing:2},n.default.createElement(h.a,{item:!0},"Memory:"),n.default.createElement(h.a,{item:!0},q(t.memorytotal-t.memoryfree)," Used"),n.default.createElement(h.a,{item:!0},q(t.memoryfree)," Free"),n.default.createElement(h.a,{item:!0},q(t.memorytotal)," Total"))),n.default.createElement(y.a,{variant:"body1",style:{display:"block",marginLeft:5,marginRight:5}},n.default.createElement(h.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",spacing:2},n.default.createElement(h.a,{item:!0},"Packets:"),n.default.createElement(h.a,{item:!0},t.net_packet_sent," Sent"),n.default.createElement(h.a,{item:!0},t.net_packet_dropped," Dropped"))),n.default.createElement(y.a,{variant:"body1",style:{display:"block",marginLeft:5,marginRight:5}},n.default.createElement(h.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",spacing:2},n.default.createElement(h.a,{item:!0},"CPU:"),n.default.createElement(h.a,{item:!0},t.cpuusage[59],"%"),n.default.createElement(h.a,{item:!0},n.default.createElement(w.Sparklines,{data:t.cpuusage,svgHeight:15,svgWidth:300,min:0,max:100},n.default.createElement(w.SparklinesBars,{barWidth:2,points:60}))))),n.default.createElement(y.a,{variant:"body1",gutterBottom:!0,style:{display:"block",marginLeft:5,marginRight:5}},n.default.createElement(h.a,{container:!0,direction:"row",justify:"space-evenly",alignItems:"center",spacing:2},n.default.createElement(h.a,{item:!0},"1"===t.dhcp_enable?t.dhcp_ip:r.ip),n.default.createElement(h.a,{item:!0},r.mac),n.default.createElement(h.a,{item:!0},l&&"Uptime: ".concat(t.upTime),!l&&"Offline"),n.default.createElement(h.a,{item:!0},"v1.0.3")))))},k=r(162),C=r(159),I=r(157),R=r(161),D=r(155),P=r(84),B=r.n(P);function U(){var e=H(),t=e.stream0,r=e.osd3,l=e.ready,a=j()(),u="".concat("/auto","/lightbar-drk-blue.png"),S=Object(n.useState)({remoteConfigUrl:"",autoEnabled:!1}),q=Object(m.a)(S,2),b=q[0],v=q[1],T=Object(n.useState)(!1),M=Object(m.a)(T,2),L=M[0],w=M[1];Object(n.useEffect)(function(){r&&v(function(e){return Object(s.a)({},e,{autoEnabled:"1"===r.enable})})},[r.enable]),Object(n.useEffect)(function(){r&&v(function(e){return Object(s.a)({},e,{remoteConfigUrl:r.txt})})},[r.txt]),Object(n.useEffect)(function(){l&&L&&w(!1)},[l]);var x;return n.default.createElement(n.default.Fragment,null,n.default.createElement("div",{style:{flexGrow:1}},n.default.createElement(p.a,{style:{height:45}},n.default.createElement(d.a,{variant:"dense",style:{alignItems:"flex-start"}},n.default.createElement("box",{style:{position:"absolute",left:0,top:0}},n.default.createElement("img",{src:u})),n.default.createElement(y.a,{variant:"body1",gutterBottom:!0,style:{paddingLeft:20,marginTop:10,flexGrow:1}},"Webcast Auto Configuration"),n.default.createElement(E.a,{color:"inherit",style:{right:0,marginTop:5,width:115},onClick:function(){return window.location.href="/"}},"Main Config"))),(L||!l)&&n.default.createElement(D.a,{style:{top:45,position:"fixed",width:"100%"}})),n.default.createElement(_.a,{style:{marginTop:50}},n.default.createElement(f.a,{elevation:0,square:!0},n.default.createElement(h.a,{container:!0,direction:"column",justify:"flex-start",alignItems:"flex-start",spacing:2},n.default.createElement(h.a,{item:!0},n.default.createElement("box",null,n.default.createElement(B.a,{style:{fontSize:100,color:"1"===t.rtmp_publish_enable?"green":a.palette.primary.main}}),n.default.createElement(y.a,{variant:"h6",gutterBottom:!0},"Webcast ",t&&"1"===t.rtmp_publish_enable?"On":"Off"))),n.default.createElement(h.a,{item:!0},n.default.createElement(k.a,{fullWidth:!0,variant:"filled"},t&&t.rtmp_publish_uri&&n.default.createElement(C.a,{id:"outlined-multiline-static",label:"Configured RTMP",helperText:"Displays the configured RTMP stream. This will update only when remote configuration is enabled and the remote config is ready to receive a RTMP stream.",multiline:!0,rows:3,value:t.rtmp_publish_uri,variant:"outlined",inputProps:{disabled:!0},style:{paddingBottom:16}}),n.default.createElement(C.a,{id:"outlined-helperText",label:"Remote Configuration URL",helperText:"Teredek > Registered Devices >  Remote Config URL at https://webcast.churchofjesuschrist.org/",variant:"outlined",multiline:!0,rows:2,value:b.remoteConfigUrl,onChange:(x="remoteConfigUrl",function(e){v(function(t){return Object(s.a)({},t,Object(o.a)({},x,e.target.value))})})}),n.default.createElement(I.a,{control:n.default.createElement(R.a,{checked:b.autoEnabled,onChange:function(e){return function(t){v(function(t){return Object(s.a)({},t,Object(o.a)({},e,!t.autoEnabled))})}}("autoEnabled"),name:"autoEnabled",color:"primary"}),label:"Auto configuration enabled"})),n.default.createElement(E.a,{variant:"contained",color:"primary",onClick:function(){w(!0);var e={enc_chn:"3",osd_chn:"0",txt:b.remoteConfigUrl,type:"1",enable:b.autoEnabled?"1":"0",_:"".concat(Date.now())};fetch("".concat(g,"/set_osd?").concat(function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push("".concat(encodeURIComponent(r),"=").concat(encodeURIComponent(e[r])));return t.join("&")}(e))).then(function(){var e=Object(i.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text();case 2:"succeed"===e.sent?fetch("".concat(g,"/reboot?_=").concat(Date.now())):w(!1);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},disabled:L},!L&&n.default.createElement(n.default.Fragment,null,"Save Configuration"),L&&n.default.createElement(n.default.Fragment,null,"Saving Configuration..."))))),n.default.createElement(O,null)),n.default.createElement("div",{style:{height:600}}))}var F=r(64),A=r(85),z=Object(A.a)({palette:{primary:{main:"#006184"},secondary:{main:"#bbd8f5"},error:{main:F.a.A400},background:{default:"#fff"}}});n.default.render(n.default.createElement(a.a,{theme:z},n.default.createElement(l.a,null),n.default.createElement(L,null,n.default.createElement(U,null))),document.querySelector("#root"))},93:function(e,t,r){e.exports=r(121)}},[[93,1,2]]]);
//# sourceMappingURL=main.f6df942f.chunk.js.map